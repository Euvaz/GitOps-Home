# yaml-language-server: $schema=https://taskfile.dev/schema.json
---
version: "3"

tasks:
  prepare:
    desc: Prepare hosts for Kubernetes
    cmds:
      - ansible-playbook --inventory {{.ANSIBLE_DIR}}/inventory/{{.ENV}}.yaml {{.ANSIBLE_DIR}}/playbooks/cluster-prepare.yaml
  install:
    desc: Install Kubernetes on Hosts
    cmds:
      - ansible-playbook --inventory {{.ANSIBLE_DIR}}/inventory/{{.ENV}}.yaml {{.ANSIBLE_DIR}}/playbooks/cluster-installation.yaml
  list:
    desc: List all hosts
    cmds:
      - ansible all --inventory {{.ANSIBLE_DIR}}/inventory/{{.ENV}}.yaml --list-hosts
  ping:
    desc: Ping all hosts
    cmds:
      - ansible all --inventory {{.ANSIBLE_DIR}}/inventory/{{.ENV}}.yaml --one-line --module-name "ping"
  uptime:
    desc: Provide host uptimes
    cmds:
      - ansible all --inventory {{.ANSIBLE_DIR}}/inventory/{{.ENV}}.yaml --one-line --args "uptime"